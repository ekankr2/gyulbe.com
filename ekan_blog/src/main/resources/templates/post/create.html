<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    {{>layouts/commonHead}}

</head>
<body>
{{>layouts/header}}
<section class="flex justify-center items-center h-screen">
    <div class="block p-6 rounded-lg shadow-lg bg-white w-[600px]">
        <form id="postForm" action="/">
            <div class="form-group mb-6">
                <label for="title" class="inline-block mb-2 text-gray-700">Title</label>
                <input type="text" class="
        block
        w-full
        px-3
        py-1.5
        text-base
        font-normal
        text-gray-700
        bg-white bg-clip-padding
        border border-solid border-gray-300
        rounded
        transition
        ease-in-out
        m-0
        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none" id="title"
                       placeholder="Enter Title">
            </div>
            <div class="form-group mb-6">
                <label for="content" class="form-label inline-block mb-2 text-gray-700">Content</label>
                <textarea rows="5" class="form-control block
        w-full
        px-3
        py-1.5
        text-base
        font-normal
        text-gray-700
        bg-white bg-clip-padding
        border border-solid border-gray-300
        rounded
        transition
        ease-in-out
        m-0
        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none" id="content"
                          placeholder="Content here"></textarea>
            </div>
            <div class="w-full flex justify-center">
                <button type="submit" onclick="handleSubmit()" class="
      px-6
      py-2.5
      bg-blue-600
      text-white
      font-medium
      text-xs
      leading-tight
      uppercase
      rounded
      shadow-md
      hover:bg-blue-700 hover:shadow-lg
      focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0
      active:bg-blue-800 active:shadow-lg
      transition
      duration-150
      ease-in-out">등록하기
                </button>
            </div>
        </form>
    </div>
</section>
<script type="text/javascript">
    const postForm = document.getElementById('postForm')
    const handleSubmit = () => {
        postForm.addEventListener("submit", (e) => {
            e.preventDefault()

            const title = document.getElementById("title")
            const content = document.getElementById("content")

            if (title.value === "" || content.value === "") {
                return alert("내용을 채워주세요")
            }
            return fetch('/post', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({title: title.value, content: content.value})
            })
                .then((response) => response.json())
                .then((data) => {
                    console.log('data: ', data)
                    window.location.href = '/'
                })
        })
    }
    handleSubmit()
</script>
</body>
</html>